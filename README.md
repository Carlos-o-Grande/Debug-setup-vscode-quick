# Debug-setup-vscode-quick
### Setup VScode debugging (quickly)

If you never used a debugger before or never configure it on VScode, stay a while and listen.

First image will guide you at starting the config process. Just click where pointed.



![1_setup](https://github.com/Carlos-o-Grande/Debug-setup-vscode-quick/blob/main/1_setup.png)

When you have done that, on VScode explorer (1st button on top left) a .vscode folder appears with a launch.json.
If you haven't cloned this repo, use launch.json and tasks.json on github to guide you

Files are commented where is relevant. Here they are edited for brevity.

#### launch.json
```json
{
	"configurations": [
	// this launch option runs the executable but before executes "preLaunchTask": "gcc build" (see tasks.json)
	// "program": "${workspaceFolder}/ballons.out" can be replaced by a variable expanded on launch
	// we also setup args[] to 99, this executes "ballons.out 99" setting the argv of the program
		{
			"name": "GCC & Launch",
			"type": "cppdbg",
			"request": "launch",
			"program": "${workspaceFolder}/ballons.out",
			"args": [
				"99",
			],
			"stopAtEntry": true,	//optional, if true debugger always stop at first instruction
			"cwd": "${fileDirname}",
			"environment": [],
			"externalConsole": false,
			"MIMode": "gdb",
			"preLaunchTask": "gcc build",	//important
			[...omited...]
		},
		// this launch option runs the executable but before executes "Makefile": "gcc build" (see tasks.json)
		{
			"name": "Makefile & Launch",
			"program": "${workspaceFolder}/ballons.out",
			"args": [],
			"preLaunchTask": "Makefile",
		},
		// this launch option just executes the program
		{
			"name": "Launch (no build)",
			"program": "${workspaceFolder}/ballons.out",
			}
		},
```
#### tasks.json
```json
{
	"tasks": [
		// this task runs "gcc". args[] is used to setup command options.
		// in this example: gcc -fdiagnostics-color=always -g3 ${file} -o ${fileDirname}/ballons.out
		// ${file} is the active file on the editor.
		// For this example can be explicity replaced with main.c
		// the "label": "gcc build" is how launch.json identifies the task to run
		{
			"type": "cppbuild",
			"label": "gcc build",
			"command": "/usr/bin/gcc",
			"args": [
				"-fdiagnostics-color=always",
				"-g3",
				"${file}",
				"-o",
				"${fileDirname}/ballons.out"
			],
			"options": {
				"cwd": "${fileDirname}"
			},
			"problemMatcher": [
				"$gcc"
			],
			"group": "build",
			"detail": "Task generated by Debugger."
		},
		// this task runs 'make debug'. see Makefile file and 'Makefile & Launch' in launch.json
		{
			"type": "cppbuild",
			"label": "Makefile",
			"command": "make",
			"args": [
				"debug"
			],
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"detail": "run makefile"
		}
```

### NoW we are ready to lauch our debugger:

![2_debug](https://github.com/Carlos-o-Grande/Debug-setup-vscode-quick/blob/main/2_debug.png)

1. Dropdown with the options from launch.json
2. debugger toolbar (more on that below)
3. breakpoint
4. variables to watch
5. terminal for program output

Select a option from (1) and click the green play icon. VScode will compile and launch
the debugger toolbar will appear. 
if "stopAtEntry": true,	 there will be a yellow arrowe at line  27 pointing to the first instrution 


![3_toolbar](https://github.com/Carlos-o-Grande/Debug-setup-vscode-quick/blob/main/toolbar.png)
